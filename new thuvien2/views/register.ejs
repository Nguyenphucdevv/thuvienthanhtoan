<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Đăng Ký</title>
    <link rel="icon" type="image/jpeg" href="/images/thuvienavt.jpg" />
    <link rel="stylesheet" href="dangki.css" />
  </head>
  <body>
    <div class="logo-text-register">Nguyễn Văn Phúc</div>
    <div class="register-container">
      <h2>Đăng Ký Người Dùng</h2>
      <% if (typeof error !== 'undefined') { %>
      <p class="error-message"><%= error %></p>
      <% } %>
      <form action="/register" method="POST" onsubmit="return validateForm()">
        <div class="form-group">
          <label for="hoTen">Họ và Tên:</label>
          <input type="text" id="hoTen" name="hoTen" required />
        </div>
        <div class="form-group">
          <label for="soDienThoai">Số Điện Thoại:</label>
          <input type="tel" id="soDienThoai" name="soDienThoai" required />
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" required />
        </div>
        <div class="form-group">
          <label for="taiKhoan">Tài Khoản:</label>
          <input
            type="text"
            id="taiKhoan"
            name="taiKhoan"
            minlength="5"
            maxlength="16"
            required
          />
          <span class="field-error" id="taiKhoanError"
            >Tài khoản phải từ 5 đến 16 ký tự!</span
          >
        </div>
        <div class="form-group">
          <label for="matKhau">Mật Khẩu:</label>
          <input
            type="password"
            id="matKhau"
            name="matKhau"
            minlength="5"
            maxlength="16"
            required
          />
          <span class="field-error" id="matKhauError"
            >Mật khẩu phải từ 5 đến 16 ký tự!</span
          >
        </div>
        <button type="submit">Đăng Ký</button>
      </form>
      <br />
      <a href="/login"><button>Quay lại Đăng Nhập</button></a>
    </div>

    <script>
      function validateForm() {
        let isValid = true;
        const fields = [
          { id: "taiKhoan", errorId: "taiKhoanError" },
          { id: "matKhau", errorId: "matKhauError" },
        ];

        fields.forEach((field) => {
          const input = document.getElementById(field.id);
          const error = document.getElementById(field.errorId);
          const value = input.value.trim();

          if (value.length < 5 || value.length > 16) {
            error.style.display = "block";
            isValid = false;
          } else {
            error.style.display = "none";
          }
        });

        return isValid;
      }

      // Kiểm tra độ dài khi người dùng nhập liệu
      ["taiKhoan", "matKhau"].forEach((id) => {
        const input = document.getElementById(id);
        input.addEventListener("input", () => {
          const error = document.getElementById(`${id}Error`);
          const value = input.value.trim();

          if (value.length < 5 || value.length > 16) {
            error.style.display = "block";
          } else {
            error.style.display = "none";
          }
        });
      });
    </script>
  </body>
</html>
